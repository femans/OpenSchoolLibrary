# Internationalization (i18n) Guide

## Overview

OpenSchoolLibrary uses `sveltekit-i18n` for internationalization support. The application currently supports:

- **English (en)** - Default language
- **Dutch (nl)** - Nederlands

## Quick Start

### Using Translations in Components

```svelte
<script>
	import { t } from '$lib/i18n';
</script>

<h1>{$t('common.app.name')}</h1>
<button>{$t('common.actions.save')}</button>
```

### Language Selector

A language selector component is included in the main navigation. Users can switch languages, and their preference is saved to localStorage.

## Translation Structure

### File Organization

```
src/lib/i18n/
├── index.ts                    # i18n configuration
└── locales/
    ├── en/
    │   ├── common.json         # Shared translations
    │   ├── admin.json          # Admin interface
    │   └── reader.json         # Reader journal
    └── nl/
        ├── common.json
        ├── admin.json
        └── reader.json
```

### Translation Namespaces

#### `common.json` - Shared UI Elements

- `app.*` - App name and tagline
- `nav.*` - Navigation labels
- `actions.*` - Buttons and actions (save, cancel, delete, etc.)
- `status.*` - Status labels (available, checked out, etc.)
- `messages.*` - System messages (loading, errors, etc.)

#### `admin.json` - Admin Interface

- `dashboard.*` - Dashboard content and stats
- `books.*` - Books management
- `children.*` - Children management
- `copies.*` - Copies management
- `loans.*` - Loans management
- `login.*` - Login page

#### `reader.json` - Reader Journal

- `journal.*` - Reading journal content

## Adding a New Language

### 1. Create Translation Files

Create three JSON files in `src/lib/i18n/locales/[locale]/`:

**common.json:**

```json
{
  "app": {
    "name": "OpenSchoolLibrary",
    "tagline": "Your tagline in the new language"
  },
  "nav": {
    "home": "Home",
    "dashboard": "Dashboard",
    ...
  },
  ...
}
```

Copy the structure from existing files and translate all values.

### 2. Register the Locale

In `src/lib/i18n/index.ts`, add loader entries for your new locale:

```typescript
const config: Config = {
	loaders: [
		// ... existing loaders
		{
			locale: 'de',
			key: 'common',
			loader: async () => (await import('./locales/de/common.json')).default
		},
		{
			locale: 'de',
			key: 'admin',
			loader: async () => (await import('./locales/de/admin.json')).default
		},
		{
			locale: 'de',
			key: 'reader',
			loader: async () => (await import('./locales/de/reader.json')).default
		}
	]
};
```

### 3. Test Your Translation

1. Start the dev server: `npm run dev`
2. Use the language selector to switch to your new language
3. Navigate through all pages to verify translations

## Translation Keys Reference

### Common Actions

```
common.actions.save
common.actions.cancel
common.actions.delete
common.actions.edit
common.actions.add
common.actions.search
common.actions.filter
common.actions.clear
common.actions.back
common.actions.submit
common.actions.create
common.actions.update
common.actions.checkout
common.actions.return
```

### Status Labels

```
common.status.available
common.status.checked_out
common.status.lost
common.status.damaged
common.status.active
common.status.returned
```

### Messages

```
common.messages.loading
common.messages.no_data
common.messages.success
common.messages.error
common.messages.confirm_delete
```

## Best Practices

### 1. Keep Keys Organized

Use a clear hierarchy:

```
namespace.feature.element
```

Example: `admin.books.add_book`

### 2. Avoid Hardcoded Strings

Always use translation keys, even for simple text:

```svelte
<!-- ❌ Bad -->
<button>Save</button>

<!-- ✅ Good -->
<button>{$t('common.actions.save')}</button>
```

### 3. Use Consistent Terminology

Maintain consistency across all languages:

- "Book" vs "Title" - pick one
- "Child" vs "Student" vs "Reader" - pick one
- "Checkout" vs "Borrow" - pick one

### 4. Handle Plurals

For now, use separate keys for singular/plural:

```json
{
	"books": {
		"book": "Book",
		"books": "Books",
		"book_count": "{count} Books"
	}
}
```

### 5. Context Matters

If the same word translates differently in different contexts, use separate keys:

```json
{
	"copy_book": "Copy", // Physical copy of a book
	"copy_text": "Copy" // Copy text action
}
```

## Troubleshooting

### Missing Translation

If a key is missing, the key path will be displayed instead:

```
common.missing.key
```

Check the browser console for warnings.

### Translation Not Updating

1. Clear browser cache and localStorage
2. Restart the dev server
3. Check for typos in translation keys

### Wrong Language Displayed

The app reads from localStorage. To reset:

```javascript
localStorage.removeItem('locale');
location.reload();
```

## Contributing Translations

We welcome translations! To contribute:

1. Fork the repository
2. Create translation files for your language
3. Test thoroughly
4. Submit a pull request

Include in your PR:

- All three translation files (common, admin, reader)
- Native speaker review if possible
- Screenshots showing the translations in use

## Future Enhancements

- [ ] ICU message format for plurals and variables
- [ ] RTL (right-to-left) language support
- [ ] Date/time localization
- [ ] Number formatting per locale
- [ ] Translation management UI
- [ ] Automatic missing key detection
- [ ] Translation validation tests
